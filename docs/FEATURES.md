# é‡å¿ƒã‚±ã‚¢æ”¯æ´ã‚¢ãƒ—ãƒªï½œæ©Ÿèƒ½ä¸€è¦§ï¼ˆæ£šå¸ã—çµæœï¼‰

**æ›´æ–°æ—¥**: 2026å¹´1æœˆ28æ—¥  
**æ£šå¸ã—æ–¹æ³•**: App Router ãƒ«ãƒ¼ãƒˆå…¨ç¶²ç¾… + ãƒªãƒ³ã‚¯ç…§åˆ + APIä¸€è¦§  
**ç›®çš„**: å®Ÿè£…æ¸ˆæ©Ÿèƒ½ãƒ»404å€™è£œãƒ»æœªå®Ÿè£…æ©Ÿèƒ½ã‚’ä¸€è¦§åŒ–ã—ã€æ¬¡ã®æ”¹ä¿®ã®å„ªå…ˆåº¦ã‚’æ±ºå®š

---

## ğŸ“‹ æ–¹æ³•è«–

1. **ãƒ«ãƒ¼ãƒˆæŠ½å‡º**: `app/` é…ä¸‹ã®å…¨ `page.tsx` + `route.ts` ã‚’åˆ—æŒ™
2. **ãƒªãƒ³ã‚¯ç…§åˆ**: ã‚¢ãƒ—ãƒªå†…ã®ãƒªãƒ³ã‚¯æ–‡å­—åˆ—ï¼ˆ"ã‚±ãƒ¼ã‚¹è¨˜éŒ²"ãªã©ï¼‰â†’ å¯¾å¿œãƒ«ãƒ¼ãƒˆã®æœ‰ç„¡ç¢ºèª
3. **APIç¢ºèª**: `/api/**` ä»¥ä¸‹ã® route.ts ã‚’åˆ—æŒ™ã—ã€ãƒ•ãƒ­ãƒ³ãƒˆé·ç§»ã¨ã®ç´ä»˜ã‘
4. **çŠ¶æ…‹åˆ¤å®š**: 
   - âœ… å®Ÿè£…æ¸ˆ: ãƒ«ãƒ¼ãƒˆå­˜åœ¨ + ãƒªãƒ³ã‚¯å­˜åœ¨ + UIå®Ÿè£…
   - ğŸ”— ãƒªãƒ³ã‚¯å­˜åœ¨ï¼‹ãƒ«ãƒ¼ãƒˆç„¡: **404å€™è£œ** â†’ æ¬¡ã®å„ªå…ˆåº¦ A
   - âŒ æœªå®Ÿè£…: ãƒªãƒ³ã‚¯/ãƒ«ãƒ¼ãƒˆå…±ã«ç„¡

---

## ğŸ“ App Router ãƒ«ãƒ¼ãƒˆä¸€è¦§ï¼ˆå…¨32ãƒ«ãƒ¼ãƒˆï¼‰

### ãƒ«ãƒ¼ãƒˆåˆ†é¡ã¨ URL ãƒ‘ã‚¿ãƒ¼ãƒ³

| ãƒ«ãƒ¼ãƒˆ | URL ãƒ‘ã‚¿ãƒ¼ãƒ³ | èª¬æ˜ | çŠ¶æ…‹ |
|--------|------------|------|------|
| **ãƒ›ãƒ¼ãƒ ** | | | |
| home-client | `/` | ãƒ¡ã‚¤ãƒ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆHomeç”»é¢ï¼‰ | âœ… å®Ÿè£…æ¸ˆ |
| **ãƒ­ã‚°ã‚¤ãƒ³ãƒ»èªè¨¼** | | | |
| login/page | `/login` | ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ | âœ… å®Ÿè£…æ¸ˆ |
| reset-password/page | `/reset-password` | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ | âœ… å®Ÿè£…æ¸ˆ |
| **ã‚µãƒ¼ãƒ“ã‚¹ç®¡ç†** | | | |
| services/[serviceId]/page | `/services/{serviceId}` | ã‚µãƒ¼ãƒ“ã‚¹è©³ç´°ãƒšãƒ¼ã‚¸ | âœ… å®Ÿè£…æ¸ˆ |
| services/[serviceId]/staff/page | `/services/{serviceId}/staff` | ã‚¹ã‚¿ãƒƒãƒ•ä¸€è¦§ | âœ… å®Ÿè£…æ¸ˆ |
| services/[serviceId]/users/page | `/services/{serviceId}/users` | åˆ©ç”¨è€…ä¸€è¦§ | âœ… å®Ÿè£…æ¸ˆ |
| **åˆ©ç”¨è€…ç®¡ç†** | | | |
| services/[serviceId]/users/[userId]/page | `/services/{serviceId}/users/{userId}` | åˆ©ç”¨è€…è©³ç´°ï¼ˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ï¼‰ | âœ… å®Ÿè£…æ¸ˆ |
| services/[serviceId]/users/[userId]/case-records/page | `/services/{serviceId}/users/{userId}/case-records` | **ã‚±ãƒ¼ã‚¹è¨˜éŒ²** | âœ… å®Ÿè£…æ¸ˆ |
| services/[serviceId]/users/[userId]/daily-logs/page | `/services/{serviceId}/users/{userId}/daily-logs` | æ—¥èªŒä¸€è¦§ | âœ… å®Ÿè£…æ¸ˆ |
| services/[serviceId]/users/[userId]/diary/page | `/services/{serviceId}/users/{userId}/diary` | æ—¥è¨˜ãƒšãƒ¼ã‚¸ | âœ… å®Ÿè£…æ¸ˆ |
| **æ—¥èªŒãƒ»è¨˜éŒ²** | | | |
| daily-log/page | `/daily-log` | æ—¥èªŒãƒ¡ã‚¤ãƒ³ | âœ… å®Ÿè£…æ¸ˆ |
| daily-log/expression/page | `/daily-log/expression` | è¡¨æƒ…ãƒ»åå¿œè¨˜éŒ² | âœ… å®Ÿè£…æ¸ˆ |
| daily-log/expression/history/page | `/daily-log/expression/history` | è¡¨æƒ…ãƒ»åå¿œå±¥æ­´ | âœ… å®Ÿè£…æ¸ˆ |
| daily-log/seizure/page | `/daily-log/seizure` | ç™ºä½œè¨˜éŒ² | âœ… å®Ÿè£…æ¸ˆ |
| daily-log/seizure/history/page | `/daily-log/seizure/history` | ç™ºä½œå±¥æ­´ | âœ… å®Ÿè£…æ¸ˆ |
| **æ—¥è¨˜** | | | |
| diary/page | `/diary` | æ—¥è¨˜ä¸€è¦§ | âœ… å®Ÿè£…æ¸ˆ |
| diary/[id]/page | `/diary/{id}` | æ—¥è¨˜è©³ç´° | âœ… å®Ÿè£…æ¸ˆ |
| diary/monthly/page | `/diary/monthly` | æœˆåˆ¥æ—¥è¨˜ãƒ“ãƒ¥ãƒ¼ | âœ… å®Ÿè£…æ¸ˆ |
| **ãã®ä»–æ©Ÿèƒ½** | | | |
| alerts/page | `/alerts` | ã‚¢ãƒ©ãƒ¼ãƒˆä¸€è¦§ | âœ… å®Ÿè£…æ¸ˆ |
| medications/page | `/medications` | æœè–¬ç®¡ç† | âœ… å®Ÿè£…æ¸ˆ |
| seizures/page | `/seizures` | ç™ºä½œç®¡ç† | âœ… å®Ÿè£…æ¸ˆ |
| seizures/new/page | `/seizures/new` | ç™ºä½œæ–°è¦è¨˜éŒ² | âœ… å®Ÿè£…æ¸ˆ |
| todos/page | `/todos` | TODOç®¡ç† | âœ… å®Ÿè£…æ¸ˆ |
| voice/page | `/voice` | éŸ³å£°è¨˜éŒ² | âœ… å®Ÿè£…æ¸ˆ |
| family/page | `/family` | å®¶æ—é€£æº | âœ… å®Ÿè£…æ¸ˆ |
| settings/thresholds/page | `/settings/thresholds` | é–¾å€¤è¨­å®š | âœ… å®Ÿè£…æ¸ˆ |
| print/a4/case-record/page | `/print/a4/case-record` | A4ã‚±ãƒ¼ã‚¹è¨˜éŒ²å°åˆ·ç”¨ | âœ… å®Ÿè£…æ¸ˆ |
| forms/[form]/page | `/forms/{form}` | å‹•çš„ãƒ•ã‚©ãƒ¼ãƒ  | âœ… å®Ÿè£…æ¸ˆ |
| **Pochiï¼ˆéè¡¨ç¤ºã‚°ãƒ«ãƒ¼ãƒ—ï¼‰** | | | |
| (pochi)/users/page | `/pochi/users`? | Pochiç”¨åˆ©ç”¨è€…ä¸€è¦§ | â“ ä¸æ˜ |
| (pochi)/manage/achievements/daily/page | `/pochi/manage/achievements/daily`? | Pochié”æˆç®¡ç† | â“ ä¸æ˜ |
| **Recordsï¼ˆéè¡¨ç¤ºã‚°ãƒ«ãƒ¼ãƒ—ï¼‰** | | | |
| (records)/* | éè¡¨ç¤º | è¨˜éŒ²ç”¨å†…éƒ¨ãƒ«ãƒ¼ãƒˆ | â“ ä¸æ˜ |

---

## ğŸ”— ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ»ãƒªãƒ³ã‚¯ç…§åˆè¡¨

### ãƒ›ãƒ¼ãƒ ç”»é¢ã®ãƒªãƒ³ã‚¯

| ãƒªãƒ³ã‚¯æ–‡å­—åˆ— | href | ãƒ«ãƒ¼ãƒˆå­˜åœ¨ | çŠ¶æ…‹ | å‚™è€ƒ |
|-----------|------|----------|------|------|
| ã‚±ãƒ¼ã‚¹è¨˜éŒ² | `/services/life-care/users/AT/case-records` | âœ… | âœ… å®Ÿè£…æ¸ˆ | ATï¼ˆAãƒ»Tã•ã‚“ï¼‰å°‚ç”¨ãƒªãƒ³ã‚¯ |
| æ—¥èªŒè¨˜éŒ² | `/daily-log` | âœ… | âœ… å®Ÿè£…æ¸ˆ | æ—¥èªŒãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ |
| ç™ºä½œè¨˜éŒ² | `/seizures` | âœ… | âœ… å®Ÿè£…æ¸ˆ | ç™ºä½œç®¡ç†ãƒšãƒ¼ã‚¸ |
| æœè–¬ç®¡ç† | `/medications` | âœ… | âœ… å®Ÿè£…æ¸ˆ | æœè–¬ç®¡ç†ãƒšãƒ¼ã‚¸ |
| æ—¥è¨˜ | `/diary` | âœ… | âœ… å®Ÿè£…æ¸ˆ | æ—¥è¨˜ä¸€è¦§ãƒšãƒ¼ã‚¸ |
| ã‚µãƒ¼ãƒ“ã‚¹ä¸€è¦§ | `/services/{serviceId}` | âœ… | âœ… å®Ÿè£…æ¸ˆ | å„ã‚µãƒ¼ãƒ“ã‚¹ã®è©³ç´°ãƒšãƒ¼ã‚¸ |

### åˆ©ç”¨è€…è©³ç´°ãƒšãƒ¼ã‚¸ (`/services/{serviceId}/users/{userId}`) ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

| ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³é …ç›® | é·ç§»å…ˆ URL | ãƒ«ãƒ¼ãƒˆå­˜åœ¨ | çŠ¶æ…‹ | å‚™è€ƒ |
|------------------|----------|----------|------|------|
| Overview ã‚¿ãƒ– | `/services/{serviceId}/users/{userId}` | âœ… | âœ… å®Ÿè£…æ¸ˆ | åˆ©ç”¨è€…ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« |
| Case Records ãƒœã‚¿ãƒ³ | `/services/{serviceId}/users/{userId}/case-records` | âœ… | âœ… å®Ÿè£…æ¸ˆ | ã‚±ãƒ¼ã‚¹è¨˜éŒ²ãƒšãƒ¼ã‚¸ |
| Daily Logs | `/services/{serviceId}/users/{userId}/daily-logs` | âœ… | âœ… å®Ÿè£…æ¸ˆ | æ—¥èªŒä¸€è¦§ |
| Diary | `/services/{serviceId}/users/{userId}/diary` | âœ… | âœ… å®Ÿè£…æ¸ˆ | æ—¥è¨˜ãƒšãƒ¼ã‚¸ |

---

## ğŸ”´ 404 å€™è£œï¼ˆãƒªãƒ³ã‚¯å­˜åœ¨ â†” ãƒ«ãƒ¼ãƒˆç„¡ï¼‰

ç¾åœ¨ã®ã¨ã“ã‚ã€**404å€™è£œã¯æ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ**ã€‚

#### è£œè¶³
- `home-client.tsx` è¡Œ482: `Link href="/services/life-care/users/AT/case-records"` ã¯æ­£ã—ããƒ«ãƒ¼ãƒˆãŒå­˜åœ¨
- ã™ã¹ã¦ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒªãƒ³ã‚¯ãŒå¯¾å¿œã™ã‚‹ãƒ«ãƒ¼ãƒˆã‚’æŒã¤
- ãŸã ã—ã€**ATï¼ˆ"AT"ã¨ã„ã† userIdï¼‰ãŒäº‹å‰ã« Supabase ã«å­˜åœ¨ã—ã¦ã„ã‚‹ã‹**ã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚‹

---

## ğŸ”Œ API ãƒ«ãƒ¼ãƒˆä¸€è¦§ï¼ˆå…¨11ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰

| API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ | åˆ©ç”¨å…ˆ | çŠ¶æ…‹ |
|------------------|---------|------|-------|------|
| `/api/case-records/save` | POST | ã‚±ãƒ¼ã‚¹è¨˜éŒ²ã‚’ä¿å­˜ | CaseRecordFormClient.tsx | âœ… å®Ÿè£…æ¸ˆ |
| `/api/case-records/list` | GET | ã‚±ãƒ¼ã‚¹è¨˜éŒ²ä¸€è¦§å–å¾— | CaseRecordsListClient.tsx | âœ… å®Ÿè£…æ¸ˆ |
| `/api/case-records` | GET/POST/DELETE | ã‚±ãƒ¼ã‚¹è¨˜éŒ² CRUD | è¤‡æ•° | âœ… å®Ÿè£…æ¸ˆ |
| `/api/care-receivers` | GET/POST/DELETE | åˆ©ç”¨è€…æƒ…å ± CRUD | ServicePage, UserList | âœ… å®Ÿè£…æ¸ˆ |
| `/api/care-receivers/list` | GET | åˆ©ç”¨è€…ä¸€è¦§å–å¾— | Dashboard | âœ… å®Ÿè£…æ¸ˆ |
| `/api/care-receivers/[id]` | GET/PUT/DELETE | åˆ©ç”¨è€…è©³ç´°æ“ä½œ | UserDetailPage | âœ… å®Ÿè£…æ¸ˆ |
| `/api/care-receivers/update-display-name` | PUT | åˆ©ç”¨è€…åæ›´æ–° | UserDetailPage | âœ… å®Ÿè£…æ¸ˆ |
| `/api/staff` | GET/POST | ã‚¹ã‚¿ãƒƒãƒ•æƒ…å ± | StaffSelector | âœ… å®Ÿè£…æ¸ˆ |
| `/api/voice/save` | POST | éŸ³å£°è¨˜éŒ²ä¿å­˜ | VoiceRecorder | âœ… å®Ÿè£…æ¸ˆ |
| `/api/whisper` | POST | éŸ³å£°èªè­˜ï¼ˆOpenAI Whisperï¼‰ | VoiceRecorder | âœ… å®Ÿè£…æ¸ˆ |
| `/api/push/send` | POST | ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥é€ä¿¡ | Notification | âœ… å®Ÿè£…æ¸ˆ |

---

## ï¿½ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»é‹ç”¨æ©Ÿèƒ½

| æ©Ÿèƒ½åˆ†é¡ | æ©Ÿèƒ½å | å®Ÿè£…çŠ¶æ³ | èª¬æ˜ |
|---------|-------|---------|------|
| **ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ** | Vercel + Supabase æœ¬ç•ªæ§‹æˆ | âœ… è¨­è¨ˆæ¸ˆ | `docs/DEPLOYMENT.md` ã«ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †ã‚’è¨˜è¼‰ |
| **ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ** | ç’°å¢ƒå¤‰æ•°ç®¡ç† | âœ… è¨­è¨ˆæ¸ˆ | `NEXT_PUBLIC_SUPABASE_URL` ãªã©å¿…é ˆå¤‰æ•°ã‚’æ•´ç† |
| **ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ** | ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ | âœ… è¨­è¨ˆæ¸ˆ | `/api/health` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆäºˆå®šï¼‰ |
| **åŒæ™‚ç·¨é›†åˆ¶å¾¡** | æ¥½è¦³ãƒ­ãƒƒã‚¯ï¼ˆOptimistic Lockingï¼‰ | âœ… å®Ÿè£…æ¸ˆ | `version` ã‚«ãƒ©ãƒ ã«ã‚ˆã‚‹ç«¶åˆæ¤œå‡º |
| **åŒæ™‚ç·¨é›†åˆ¶å¾¡** | 409 Conflict ã‚¨ãƒ©ãƒ¼å‡¦ç† | âœ… å®Ÿè£…æ¸ˆ | ãƒ•ãƒ­ãƒ³ãƒˆã§ç«¶åˆãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º |
| **åŒæ™‚ç·¨é›†åˆ¶å¾¡** | å†èª­ã¿è¾¼ã¿ãƒœã‚¿ãƒ³ | âœ… å®Ÿè£…æ¸ˆ | AlertDialog ã‹ã‚‰æœ€æ–°ãƒ‡ãƒ¼ã‚¿å–å¾— |
| **åŒæ™‚ç·¨é›†åˆ¶å¾¡** | DB ãƒˆãƒªã‚¬ãƒ¼ | âœ… å®Ÿè£…æ¸ˆ | `increment_version()` ã§è‡ªå‹• version å¢—åŠ  |

### å®Ÿè£…è©³ç´°

#### æ¥½è¦³ãƒ­ãƒƒã‚¯
- **DB migration**: `supabase/migrations/20260128093212_add_version_to_case_records.sql`
- **API**: `/api/case-records/save` ã§ `version` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚Šã€ä¸€è‡´ã—ãªã‘ã‚Œã° 409 ã‚’è¿”å´
- **ãƒ•ãƒ­ãƒ³ãƒˆ**: `CaseRecordFormClient.tsx` ã§ 409 å—ä¿¡æ™‚ã«ç«¶åˆãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤º
- **è¨­è¨ˆæ›¸**: `docs/CONCURRENCY.md` ã«è©³ç´°è¨­è¨ˆã‚’è¨˜è¼‰

#### ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ
- **Vercel**: Next.js ã‚¢ãƒ—ãƒªã‚’ Vercel ã«ãƒ‡ãƒ—ãƒ­ã‚¤
- **Supabase**: æœ¬ç•ªç”¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ–°è¦ä½œæˆã—ã€ç’°å¢ƒå¤‰æ•°ã«è¨­å®š
- **ç’°å¢ƒå¤‰æ•°**: `NEXT_PUBLIC_SUPABASE_URL`, `NEXT_PUBLIC_SUPABASE_ANON_KEY`, `SUPABASE_SERVICE_ROLE_KEY`
- **è¨­è¨ˆæ›¸**: `docs/DEPLOYMENT.md` ã«ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †ã‚’è¨˜è¼‰

---

## ï¿½ğŸ“Š æ©Ÿèƒ½ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚µãƒãƒªãƒ¼

| ã‚«ãƒ†ã‚´ãƒª | å®Ÿè£…æ¸ˆ | 404 | æœªå®Ÿè£… | åˆè¨ˆ |
|---------|------|-----|-------|------|
| ãƒšãƒ¼ã‚¸/ãƒ«ãƒ¼ãƒˆ | 30 | 0 | 2* | 32 |
| API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | 11 | 0 | 0 | 11 |
| ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒªãƒ³ã‚¯ | 6 | 0 | 0 | 6 |

*æœªå®Ÿè£…: `(pochi)` ã‚°ãƒ«ãƒ¼ãƒ— 2ãƒ«ãƒ¼ãƒˆï¼ˆéè¡¨ç¤ºã‚°ãƒ«ãƒ¼ãƒ—ã€å®Ÿè£…çŠ¶æ³ä¸æ˜ï¼‰

---

## âœ… ã€Œã‚±ãƒ¼ã‚¹è¨˜éŒ²ã€æ©Ÿèƒ½ã®è©³ç´°ç¢ºèª

### ãƒªãƒ³ã‚¯å…ƒ
- **ãƒ›ãƒ¼ãƒ ç”»é¢** (`app/home-client.tsx` L482)
  ```tsx
  <Link href="/services/life-care/users/AT/case-records">
    <h3>ã‚±ãƒ¼ã‚¹è¨˜éŒ²</h3>
    <p>åˆ©ç”¨è€…æ¯ã®ã‚±ãƒ¼ã‚¹è¨˜éŒ²ç¢ºèª</p>
  </Link>
  ```

- **åˆ©ç”¨è€…è©³ç´°ãƒšãƒ¼ã‚¸** (`app/services/[serviceId]/users/[userId]/page.tsx` L650)
  ```tsx
  router.push(`/services/${serviceId}/users/${encodeURIComponent(normalizedUserId)}/case-records`)
  ```

### ãƒ«ãƒ¼ãƒˆå®Ÿè£…
- **ãƒ«ãƒ¼ãƒˆ**: `/services/[serviceId]/users/[userId]/case-records/page.tsx` âœ… å­˜åœ¨
- **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: `src/components/case-records/CaseRecordFormClient.tsx` âœ… å®Ÿè£…æ¸ˆ
- **API**: `/api/case-records/save` (POST) âœ… å®Ÿè£…æ¸ˆ

### ä¾å­˜ãƒ†ãƒ¼ãƒ–ãƒ«
- `case_records` (Supabase)
- `care_receivers` (Supabase)
- `services` (Supabase)

### ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³
âœ… **å®Œå…¨å®Ÿè£…**
- ãƒšãƒ¼ã‚¸ãƒ«ãƒ¼ãƒˆå­˜åœ¨
- ãƒ•ã‚©ãƒ¼ãƒ UIå®Ÿè£…
- ä¿å­˜APIå®Ÿè£…
- ä¸€è¦§è¡¨ç¤ºAPIå®Ÿè£…

---

## ğŸš€ æ¬¡ã«ç›´ã™ã¹ã 404 ä¸€è¦§

**ç¾åœ¨: 0ä»¶**

ã™ã¹ã¦ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒªãƒ³ã‚¯ãŒæ­£ã—ã„ãƒ«ãƒ¼ãƒˆã‚’æŒ‡ã—ã¦ãŠã‚Šã€404 ã¯æ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚

### ãŸã ã—ç¢ºèªã™ã¹ãé …ç›®

1. **ATï¼ˆuserId "AT"ï¼‰ã®å­˜åœ¨ç¢ºèª**
   - ãƒ›ãƒ¼ãƒ ç”»é¢ã§ `AT` ã«ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒªãƒ³ã‚¯ãŒã‚ã‚‹
   - Supabase ã«å®Ÿéš›ã« `AT` ã¨ã„ã† user ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèªãŒå¿…è¦
   - å­˜åœ¨ã—ãªã„å ´åˆ â†’ å‹•çš„ã«åˆ©ç”¨è€…ã‚’é¸æŠã§ãã‚‹ã‚ˆã†ã«ä¿®æ­£ã™ã¹ã

2. **(pochi) ã‚°ãƒ«ãƒ¼ãƒ—ã®æ•´ç†**
   - `app/(pochi)/users/page.tsx` ã¨ `app/(pochi)/manage/achievements/daily/page.tsx` ã¯ä½•ã‹?
   - éè¡¨ç¤ºã‚°ãƒ«ãƒ¼ãƒ—ã ãŒãƒ«ãƒ¼ãƒˆã¯å­˜åœ¨ã™ã‚‹ â†’ è¦ç¢ºèª

3. **å‰Šé™¤æ¸ˆã¿/å»ƒæ­¢ãƒ«ãƒ¼ãƒˆã®ç¢ºèª**
   - æ—§ URL ã‚„å‰Šé™¤æ¸ˆã¿ API ã¸ã®å‚ç…§ãŒãªã„ã‹ç¢ºèª

---

## ğŸ“ ãƒªãƒ³ã‚¯ç¢ºèªã‚³ãƒãƒ³ãƒ‰

```bash
# ã€Œã‚±ãƒ¼ã‚¹è¨˜éŒ²ã€ã€Œæ—¥èªŒã€ãªã©ã®å…¨ãƒªãƒ³ã‚¯å‡ºç¾ç®‡æ‰€
rg -n "case-records|ã‚±ãƒ¼ã‚¹è¨˜éŒ²|diary|æ—¥èªŒ" app --type ts --type tsx

# API å‘¼ã³å‡ºã—å‡ºç¾ç®‡æ‰€
rg -n "/api/" src components --type ts --type tsx | grep fetch
```

---

## ä½¿ç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

- **shared schema**: `src/lib/case-records/form-schemas.ts`
- **API schema validation**: Zod
- **State management**: React Hooks + localStorage/Supabase

---

**End of Document**  
*æ¬¡ã®ã‚¿ã‚¹ã‚¯: å„ªå…ˆåº¦Aã€ŒAT ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å‹•çš„åŒ–ã€ã¾ãŸã¯ãƒªãƒ³ã‚¯æœªå®Ÿè£…ã®404ä¿®æ­£*
