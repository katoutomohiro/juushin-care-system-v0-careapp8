# 実機確認手順書

**日付**: 2025-12-16  
**対象**: A.Tケース記録フォーム + Console 500連打止血の確認

## 事前準備

### 1. 開発サーバー起動
```powershell
cd c:\dev\juushin-care-system-v0-careapp8
pnpm dev
```

サーバーが起動したら、以下のメッセージを確認：
```
▲ Next.js 15.x.x
- Local:        http://localhost:3000
```

---

## テスト1: A.Tページの動作確認（最重要）

### 1-1. A.Tページにアクセス
```
http://localhost:3000/services/life-care/users/A%E3%83%BB%EF%BC%B4
```
（または日本語URL: `http://localhost:3000/services/life-care/users/A・T`）

### 1-2. DevTools Console を開く
- ブラウザで `F12` キーを押す
- 「Console」タブを選択

### 1-3. 確認ポイント
✅ **Console に `/api/case-records` の 500 エラーが連打されていないこと**
   - 修正前: 数秒おきに `Failed to load resource: 500` が大量に出ていた
   - 修正後: 出ない（または初回1回のみ）

✅ **ページが正常に表示されること**
   - 利用者名「A・T」が表示される
   - 「ケース記録入力（A4印刷対応）」カードが表示される

### 1-4. ケース記録フォームを開く
1. 「ケース記録入力（A4印刷対応）」カードをクリック
2. フォームが表示されることを確認
   - 記録日、担当職員名、サービス時間帯の入力欄
   - バイタルサイン（体温4回分）
   - 水分補給（4回分）
   - 排泄記録（6回分）
   - 食事記録（昼食・おやつ）
   - 入浴、課題、身体拘束、活動、特記事項

### 1-5. プレビュー機能（任意）
1. フォームに適当なデータを入力（例: 記録日、体温1回目だけ入力）
2. 「保存」ボタンをクリック
3. A4プレビュー画面が表示される
4. 「🖨️ 印刷する」ボタンが表示される

---

## テスト2: 他の利用者ページの動作確認（回帰テスト）

### 2-1. A.T以外の利用者ページにアクセス
例: 山田太郎さん（適当な利用者名に置き換えてください）
```
http://localhost:3000/services/life-care/users/山田太郎
```

### 2-2. 確認ポイント
✅ **ページが正常に表示されること**
✅ **「日誌記録」カードが表示されること**（A.T専用ではない通常の日誌記録）
✅ **日誌記録カードをクリックすると、日誌カテゴリ一覧が表示されること**
   - 発作記録
   - バイタル記録
   - 排泄記録
   - など

✅ **Console にエラーが出ていないこと**

---

## テスト3: ケース記録一覧の確認（A.T以外）

### 3-1. A.T以外の利用者ページで「ケース記録を見る」カードをクリック

### 3-2. 確認ポイント
✅ **ケース記録一覧が表示されること**（CaseRecordCards コンポーネント）
✅ **Console に 500 エラーが出ていないこと**

---

## チェックリスト（すべて✅で合格）

- [ ] A.Tページで Console の `/api/case-records` 500連打が止まっている
- [ ] A.Tページで「ケース記録入力（A4印刷対応）」カードが表示される
- [ ] A.Tのケース記録フォームが開ける
- [ ] A.T以外の利用者ページが正常に表示される
- [ ] A.T以外で「日誌記録」カードから日誌カテゴリ一覧が開ける
- [ ] A.T以外で「ケース記録を見る」が正常動作する（500エラーなし）

---

## トラブルシューティング

### Console に 500 エラーが出る場合
1. エラーメッセージをコピー
2. Network タブで失敗したリクエストを確認（詳細なエラーレスポンスが見られる）
3. サーバーログ（ターミナル）に詳細エラーが出ているか確認

### ページが表示されない場合
1. `pnpm dev` が正常に起動しているか確認
2. ポート3000が他のプロセスに使われていないか確認
3. `.next` フォルダを削除して再起動
   ```powershell
   Remove-Item -Recurse -Force .next
   pnpm dev
   ```

### フォームが表示されない場合
1. Console に JavaScript エラーが出ていないか確認
2. `userId === "A・T"` の条件が正しく動作しているか確認（開発者ツールで確認）

---

## 完了後の報告フォーマット

```
【実機確認結果】
✅/❌ A.T Console 500連打なし
✅/❌ A.Tフォーム表示
✅/❌ A.T以外の日誌記録正常
✅/❌ A.T以外のケース記録正常

【備考】
（あれば問題点や気づいた点を記載）
```
